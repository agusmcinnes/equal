<div class="custom-select-container">
  <div class="select-overlay" *ngIf="isOpen" (click)="closeDropdown()"></div>
  <div
    class="select-trigger"
    (click)="toggleDropdown($event)"
    [class.open]="isOpen"
    [class.disabled]="disabled || loading"
    [class.loading]="loading"
    [class.has-value]="selectedOption"
  >
    <span class="select-label" [class.placeholder]="!selectedOption || loading">
      <span class="material-icons option-icon spinning" *ngIf="loading">sync</span>
      <span class="material-icons option-icon" *ngIf="!loading && selectedOption?.icon">{{ selectedOption!.icon }}</span>
      {{ loading ? 'Cargando...' : displayLabel }}
    </span>
    <span class="material-icons select-arrow" *ngIf="!loading">{{ isOpen ? 'expand_less' : 'expand_more' }}</span>
  </div>

  <div class="select-dropdown" *ngIf="isOpen" [class.open-up]="openUpward">
    <div
      class="select-option"
      *ngFor="let option of options; trackBy: trackByValue"
      [class.selected]="selectedOption?.value === option.value"
      (click)="selectOption(option)"
    >
      <span class="material-icons option-icon" *ngIf="option.icon">{{ option.icon }}</span>
      <span class="option-label">{{ option.label }}</span>
      <span class="material-icons check-icon" *ngIf="selectedOption?.value === option.value">check</span>
    </div>
  </div>
</div>
